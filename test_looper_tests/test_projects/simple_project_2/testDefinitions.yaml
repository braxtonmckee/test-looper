looper_version: 2
repos:
  simple: simple_project/5337767ea5d06611c8b958187c408ce07861d40e
environments:
  linux:
    import: simple/linux
builds:
  build2/linux:
    command: "cp $TEST_INPUTS/build_import/* $TEST_BUILD_OUTPUT_DIR"
    dependencies:
      build_import: simple/build/linux
tests:
  test2/linux:
    command: "cat $TEST_INPUTS/simplesource/starts_a_long_docker.py"
    dependencies:
      build_import: simple/build/linux
      simplesource: simple/source
  test2_data/linux:
    command: "cat $TEST_INPUTS/someData/data1.py"
    dependencies:
      someData: data/someData/aa81675724a1b46bf417d8601a953d2fd9efbae1
  test2_data_fails_1/linux:
    command: "cat $TEST_INPUTS/someData/data1.py"
    dependencies:
      someData: data/someDataBadName/aa81675724a1b46bf417d8601a953d2fd9efbae1
  test2_data_fails_2/linux:
    command: "cat $TEST_INPUTS/someData/doesntExist.py"
    dependencies:
      someData: data/someData/aa81675724a1b46bf417d8601a953d2fd9efbae1
  test2_data_fails_3/linux:
    command: "cat $TEST_INPUTS/someData/data1.py"
    dependencies:
      someData: data/someData/bad_hash
  test2_fails/linux:
    command: "cat $TEST_INPUTS/simplesource/doesntExist.py"
    dependencies:
      build_import: simple/build/linux
      simplesource: simple/source
